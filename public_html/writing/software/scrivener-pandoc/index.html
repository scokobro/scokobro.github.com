<!doctype html> <html class="no-js" lang="en"> <head> <meta charset="utf-8" /> <meta name="viewport" content="width=device-width, initial-scale=1.0" /> <title>Scrivener Pandoc</title> <link rel="stylesheet" href="http://www.ritsumei.ac.jp/~spkb/assets/css/styles_feeling_responsive.css"> <script src="http://www.ritsumei.ac.jp/~spkb/assets/js/modernizr.min.js"></script> <script> WebFontConfig = { google: { families: [ 'Rubik:300,700:latin','Lato:400,700,400italic:latin', 'Volkhov::latin' ] } }; (function() { var wf = document.createElement('script'); wf.src = ('https:' == document.location.protocol ? 'https' : 'http') + '://ajax.googleapis.com/ajax/libs/webfont/1.5.6/webfont.js'; wf.type = 'text/javascript'; wf.async = 'true'; var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wf, s); })(); </script> <noscript> <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic%7cVolkhov' rel='stylesheet' type='text/css'> </noscript> <meta name="google-site-verification" content="Vk0IOJ2jwG_qEoG7fuEXYqv0m2rLa8P778Fi_GrsgEQ" /> <meta name="msvalidate.01" content="0FB4C028ABCF07C908C54386ABD2D97F" /> <meta name="description" content="Using Scrivener, the rather wonderful writing software, as an editor/previewer for multi-purpose documents written in pandoc markdown"/> <link rel="author" href="https://plus.google.com/u/0/118311555303973066167"/> <link rel="icon" sizes="32x32" href="http://www.ritsumei.ac.jp/~spkb/assets/img/favicon-32x32.png"> <link rel="icon" sizes="192x192" href="http://www.ritsumei.ac.jp/~spkb/assets/img/touch-icon-192x192.png"> <link rel="apple-touch-icon-precomposed" sizes="180x180" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-180x180-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="152x152" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-152x152-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-144x144-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="120x120" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-120x120-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-114x114-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="76x76" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-76x76-precomposed.png"> <link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-72x72-precomposed.png"> <link rel="apple-touch-icon-precomposed" href="http://www.ritsumei.ac.jp/~spkb/assets/img/apple-touch-icon-precomposed.png"> <meta name="msapplication-TileImage" content="http://www.ritsumei.ac.jp/~spkb/assets/img/msapplication_tileimage.png"/> <meta name="msapplication-TileColor" content="#fabb00"> <!-- Facebook Optimization --> <meta property="og:locale" content="en_EN" /> <meta property="og:type" content="website" /> <meta property="og:title" content="Scrivener Pandoc" /> <meta property="og:description" content="» Masu-komi Review « is the departmental website of a British academic working at Ritsumeikan University in Kyoto, its content is primarily aimed at registered students, but it&#39;s there for anyone interested."/> <meta property="og:url" content="http://www.ritsumei.ac.jp/~spkb/writing/software/scrivener-pandoc/" /> <meta property="og:site_name" content="Media Research from Japan" /> <meta property="og:image" content="http://www.ritsumei.ac.jp/~spkb/images/notes-scribble.jpg" /> <!-- Search Engine Optimization --> <link type="text/plain" rel="author" href="http://www.ritsumei.ac.jp/~spkb/humans.txt" /> </head> <body id="top-of-page" class=""> <div id="navigation" class="sticky"> <nav class="top-bar" data-topbar> <ul class="title-area"> <li class="name"> <h1 class="show-for-small-only"><a href="http://www.ritsumei.ac.jp/~spkb" class="icon-tree"> Media Research from Japan</a></h1> </li> <!-- Remove the class "menu-icon" to get rid of menu icon. Take out "Menu" to just have icon alone --> <li class="toggle-topbar menu-icon"><a href="#"><span>Navigation</span></a></li> </ul> <section class="top-bar-section"> <ul class="right"> <li class="divider"></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/search/">Search</a></li> <li class="divider"></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/contact/">Contact</a></li> </ul> <ul class="left"> <li><a href="http://www.ritsumei.ac.jp/~spkb/">Home</a></li> <li class="divider"></li> <li class="has-dropdown"> <a href="http://www.ritsumei.ac.jp/~spkb/research/">Research</a> <ul class="dropdown"> <li><a href="http://www.ritsumei.ac.jp/~spkb/research/camangles/">Camera Angles in News</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/research/soc-dist/">Social Distance Portrayed</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/research/dtv/">Digital TV in Japan</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/research/phd/">Visual Semiosis (PhD Thesis)</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/research/oshigami/">Newspaper Sales in Japan</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/research/">All articles</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="http://www.ritsumei.ac.jp/~spkb/classes/">Classes</a> <ul class="dropdown"> <li><a href="http://www.ritsumei.ac.jp/~spkb/classes/miwp/">MIWP</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/classes/xcc/">XCC</a></li> </ul> </li> <li class="divider"></li> <li class="has-dropdown"> <a href="http://www.ritsumei.ac.jp/~spkb/blog/">Blog</a> <ul class="dropdown"> <li><a href="http://www.ritsumei.ac.jp/~spkb/blog/">Recent articles</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/blog/archive/">Archive</a></li> </ul> </li> <li class="divider"></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/photos/">Photos</a></li> <li class="divider"></li> </ul> </section> </nav> </div><!-- /#navigation --> <div id="masthead-no-image-header"> <div class="row"> <div class="small-12 columns"> <a id="logo" href="http://www.ritsumei.ac.jp/~spkb" title="Media Research from Japan – Research on the mass media from Japan"> <img src="http://www.ritsumei.ac.jp/~spkb/assets/img/logo.png" alt="Media Research from Japan – Research on the mass media from Japan"> </a> </div><!-- /.small-12.columns --> </div><!-- /.row --> </div><!-- /#masthead --> <nav class="breadcrumbs" role="menubar" aria-label="breadcrumbs"> <li><a href="http://www.ritsumei.ac.jp/~spkb">Start</a></li> <li><a href="http://www.ritsumei.ac.jp/~spkb/writing/">writing</a> <li><a href="http://www.ritsumei.ac.jp/~spkb/writing/software/">software</a> <li class="current">Scrivener Pandoc</li> </nav> <!-- added auto date after title, UNLESS 'dateoff=true' is set in meta--> <div class="row t30"> <div class="medium-8 columns medium-offset-2 end"> <article itemscope itemtype="http://schema.org/Article"> <header> <span itemprop="name"> <p class="subheadline"> Lazy ways to prepare multiple document types.</p> <h1>Scrivener Pandoc</h1> <span style="color:#bbb">PUBLISHED: 09 Sep 2015</span> </span> </header> <p class="teaser" itemprop="description"> Using Scrivener, the rather wonderful writing software, as an editor/previewer for multi-purpose documents written in pandoc markdown </p> <span itemprop="articleSection"> <h2 id="using-scrivener-as-a-pandoc-editorpreviewer">Using Scrivener as a pandoc editor/previewer</h2> <p>This article explains how you can set up Scrivener to work as a pandoc editor/previewer. Of course, you don’t actually need Scrivener and any text editor/browser combo will work ok. But, keeping things in the same app is handy and well, Scrivener is a great editor and it’s a pity not to make the best of it.</p> <p>This is what it looks like…</p> <div class="figure"> <img src="https://dl.dropboxusercontent.com/u/24949891/images/Scriv-pandoc-preview.jpg" alt="Fig. 0 Left-pane is plain text pandoc markdown, right pane shows processed document" /> <p class="caption">Fig. 0 Left-pane is plain text pandoc markdown, right pane shows processed document</p> </div> <h3 id="ingredients">Ingredients</h3> <p>For this recipe you will need:</p> <ol style="list-style-type: decimal"> <li><strong>Scrivener</strong> (super-duper writing tool. Download (and pay!) <a href="http://www.literatureandlatte.com/scrivener.php">here</a>.) Or, a text editor of your choice…</li> <li><strong>pandoc</strong> (super-duper document preparation and conversion tool. Download <a href="https://github.com/jgm/pandoc/releases">here</a>.)</li> <li><strong>markmon</strong> (very useful software-thingy, the key to the whole set-up. Download <a href="https://github.com/yyjhao/markmon">here</a>.) <ul> <li><strong>npm</strong> (Node Packaged Modules. In order to easily install markmon. Download <a href="https://www.npmjs.org/">here</a>.)</li> <li><strong>node.js</strong> (In order to use npm and markmon. Download <a href="http://nodejs.org/download/">here</a>.)</li> </ul></li> </ol> <p>The aim of this exercise - for me at least - was to find a comfortable way to be able to write and preview documents formatted with pandoc markdown. The idea being that such a document makes it easy to create nearly any file format that a publisher could dream of asking for.</p> <p>Also, being lazy, I like tedious things like formatting bibliographies to be done for me with as little input as possible. If anything, the approach I describe here is even easier that using the venerable LaTeX/bibtex combo.</p> <div class="figure"> <img src="https://dl.dropboxusercontent.com/u/24949891/images/Pandoc-markmon-flow.png" alt="Fig1. Attempt to illustrate flow" /> <p class="caption">Fig1. Attempt to illustrate flow</p> </div> <p>The above illustration shows, more or less how things works (as far as I know…). To simplify, you create a pandoc markdown document, markmon watches it and whenever you save it markmon tells pandoc to process it and give you an updated html preview.</p> <h2 id="getting-started">1. Getting started</h2> <p>After getting all the necessary bits and bobs installed, setting things up is pretty straightforward. You start by creating pandoc markdown document - the syntax is described on the pandoc homepage and is very much like other species of markdown. For the purposes of previewing it doesn’t matter what extension you give this document, there is no standard for markdown documents at the moment (‘.md’ seems to be favourite though).</p> <p>If you are going to be writing an academic paper or essay and you need to include citations and a bibliography then at the top of your document (actually anywhere at all but why not put it at the start, out of the way) you should include two fairly important bits of meta-data about where your bibliographic database is and what style of citation/bibliography you want created. Meta-data blocks start and end with a line containing just three dashes, <code>---</code>.</p> <p>The meta-data for a paper I’m working on at the moment looks like this -</p> <p><code>bibliography: /Users/USER/Documents/Bibliographies/mybib.bib</code>\ <code>csl: /Users/USER/Documents/PANDOCfiles/csl/apa.csl</code></p> <p>When pandoc/pandoc-citeproc<a href="#fn1" class="footnoteRef" id="fnref1"><sup>1</sup></a> come to make my plain-text markdown document into an all-singing all-dancing html/odt/doc(x) version this information tells them where to find:</p> <ul> <li>the ‘.bib’ file with all my bibliographic material in</li> <li>the ‘.csl’ (citation style language<a href="#fn2" class="footnoteRef" id="fnref2"><sup>2</sup></a>) file that describes the style of citations and bibliography that I need.</li> </ul> <p>In a pandoc markdown document, citations look like this <code>[@Kress:1996]</code> or, for year-only citations, like this <code>[-@Kress:1996]</code>. There are variations on this theme and you should look at the pandoc documentation of full details. Basically they are the citation keys from your ‘.bib’ database prefixed with an ‘@’ and enclosed in square brackets.</p> <hr /> <h2 id="starting-markmon">2. Starting markmon</h2> <p>Once you have a file that you want to preview then you have to tell markmon about it. So, you need to create a command that you can paste into the terminal to set the ball rolling. Below is mine, I’ll explain what it all does afterwards…</p><pre><code>node /usr/local/bin/markmon &quot;/Users/USER/Desktop/PandocMarkdownFile.md&quot; --port 3333 --command &quot;pandoc --filter pandoc-citeproc&quot; --stylesheet &quot;/Users/USER/Desktop/myStyle.css&quot;</code></pre><p>It’s fairly obvious what all this is I think but here’s the rundown:</p> <ul> <li><code>node [PATH TO MARKMON]</code> tells markmon (a node.js package) to start up…</li> <li>the path in quotes is the location of the file that markmon monitors and passes to pandoc for processing and previewing.</li> <li>the <code>--port</code> option tells the mini-server created by markmon which port to shove its output to. So in this instance you would view the result of all this markmon/pandoc activity by opening up a browser window and pointing it at <code>http://localhost:3333</code>. The default is <code>3000</code>, so you can actually miss this option out and just point your browser at port <code>3000</code> instead if you prefer.</li> <li>the <code>--command</code> option is again optional, the default is for markmon to ask pandoc to return a basic html version of the ‘.md’ file used for input.</li> <li>the <code>--stylesheet</code> option is the path to a css file which contains the styling for the html output. The default is perfectly fine but you can adjust it to your preference by including this option. I personally like the GitHub2 style that comes hidden inside <a href="http://mouapp.com/">Mou</a>, and can be borrowed for previewing purposes here too.</li> </ul> <p>So, once you’ve created your pandoc markdown file and decided on your options, all you have to do is type/copy your command into the terminal and you should get something like this…</p> <div class="figure"> <img src="https://dl.dropboxusercontent.com/u/24949891/images/markmonFunctioning.png" alt="Fig 2. Terminal response from markmon server thingy…" /> <p class="caption">Fig 2. Terminal response from markmon server thingy…</p> </div> <p>Now you’re all ready to point your browser at <code>http://localhost:3333</code> (or <code>3000</code> ) and you should see your document beautifully rendered. If you used the pandoc-citeproc option then you should also see all your pandoc-style citations magically transformed into properly formatted citations and a full bibliography at the end.</p> <h3 id="path-problems">Path problems</h3> <p>At first I experienced problem with this command as the various bits of it didn’t know where to find the other bits - node couldn’t find markmon, or pandoc or pandoc-citeproc… this even though they were all installed in pretty standard locations (I think). Being rather a know-nothing I decided the easiest way around this was just to include the full paths in the command. I’m pretty sure this is not the most elegant or efficient solution but it worked for me. If you need to find the path to a command the <code>which</code> command is your friend; typing</p><pre><code>which pandoc</code></pre><p>at the terminal prompt gives you something like this…</p><pre><code>/usr/local/bin/pandoc</code></pre><p>the full path to the pandoc command. Bingo.</p> <h2 id="scrivener">3. Scrivener</h2> <p>Right, now the obvious next step. This, for me at least, was to make best use of Scrivener’s structured approach to writing and combine it with the benefits of working in pandoc markdown.</p> <p>This is probably the least satisfactory part of the setup but this is unavoidable as we need an ‘.md’ (or at least a plain text) file to preview and not a ‘.scriv’ file so we have to ‘Compile…’ rather than just ‘Save’, this adds a few seconds/mouse-clicks to the process.</p> <p>Create a blank project and write your paper in pandoc markdown. Easy. The only adjustment you really need to make is to be aware that when you compile for markdown (an option set in the dropdown at the bottom of Scrivener’s Compile panel), your document headings are automatically prefixed with the necessary number of #s to make them into headings at the right level.</p> <p>Another things to be aware of is the possibility that the default meta-data (again set in the Compile panel) may interfere with pandoc, I found it best to just delete it.</p> <p>So, compile your document as markdown (file ending doesn’t matter really), then create your command to start markmon (see above) putting in the path to your newly created file. Hopefully you get a response like the one pictured above and your mini-server starts without problems.</p> <p>Now go back to Scrivener, split your screen (horizontally? vertically? your choice!), select the empty pane and add the preview web page to your research folder by typing in the url (<code>http://localhost:etc...</code>)</p> <div class="figure"> <img src="https://dl.dropboxusercontent.com/u/24949891/images/scrivener%20add%20screen.png" alt="Fig. 3 Add web page…" /> <p class="caption">Fig. 3 Add web page…</p> </div> <p>Now, you should have a split screen with your source document in one half and a fully-rendered preview in the other half. This is as close as I have managed to come yet to recreating the experience of markdown editors like <a href="http://mouapp.com/">Mou</a> or <a href="http://multimarkdown.com/">MMD Composer</a> for <em>pandoc</em> markdown.</p> <p>I was actually pretty amazed when this all worked ‘out of the box’ for me. Let me know how you get on! There may be things which I’ve forgotten to mention which are necessary to get it up and running, if you notice anything, let me/everyone know.</p> <p>Cheers.</p> <div class="footnotes"> <hr /> <ol> <li id="fn1"><p>This is the thing that turns citation markdown (see below, or look at pandoc documentation) into correctly formatted in-text citations and a fully formatted and organised bibliography. It comes with pandoc.<a href="#fnref1">↩</a></p></li> <li id="fn2"><p>CSL seems to be a very accessible alternative to the nastiness that is the bibtex citation style file (eeuuch!). If you need a certain style then chances are you can download it from <a href="http://editor.citationstyles.org/about/">this site</a>. If it’s not there then you can use the online tool to create what you need.<a href="#fnref2">↩</a></p></li> </ol> </div> </span> <div id="page-meta" class="t30"> <p> <!-- Look the author details up from the site config. --> <!-- Output author details if some exist. --> <time class="icon-calendar pr20" datetime="2015-09-09" itemprop="datePublished"> 2015-09-09</time> <span class="icon-archive pr20"> WRITING · SOFTWARE</span> <br> <span class="pr20"><span class="icon-price-tag pr10"> blog</span> <span class="icon-price-tag pr10"> content</span> <span class="icon-price-tag pr10"> research</span> </span> </p> <div id="post-nav" class="row"> <div class="small-5 columns"><a class="button small radius prev" href="http://www.ritsumei.ac.jp/~spkb/research/productivity/">&laquo; Productivity Surprises</a></div><!-- /.small-4.columns --> <div class="small-2 columns text-center"><a class="radius button small" href="http://www.ritsumei.ac.jp/~spkb/blog/archive/" title="Blog Archive">Archive</a></div><!-- /.small-4.columns --> <div class="small-5 columns text-right"><a class="button small radius next" href="http://www.ritsumei.ac.jp/~spkb/research/camangles/">Camera angles study &raquo;</a></div><!-- /.small-4.columns --> </div> </div><!-- /.page-meta --> </article> </div><!-- /.medium-8.columns --> </div><!-- /.row --> <div id="up-to-top" class="row"> <div class="small-12 columns" style="text-align: right;"> <a class="iconfont" href="#top-of-page">&#xf108;</a> </div><!-- /.small-12.columns --> </div><!-- /.row --> <footer id="footer-content" class="bg-grau"> <div id="footer"> <div class="row"> <div class="medium-6 large-5 columns"> <h5 class="shadow-black">About This Site</h5> <p class="shadow-black"> » Masu-komi Review « is the departmental website of a British academic working at Ritsumeikan University in Kyoto, its content is primarily aimed at registered students, but it's there for anyone interested. <a href="http://www.ritsumei.ac.jp/~spkb/info/">More ›</a> </p> </div><!-- /.large-6.columns --> <div class="small-6 medium-3 large-3 large-offset-1 columns"> <h5 class="shadow-black">Services</h5> <ul class="no-bullet shadow-black"> <li > <a href="http://www.ritsumei.ac.jp/~spkb" title=""></a> </li> <li class="services-contact" > <a href="http://www.ritsumei.ac.jp/~spkb/contact/" title="Contact">Contact</a> </li> <li class="rss-link" > <a href="http://www.ritsumei.ac.jp/~spkb/feed.xml" title="Subscribe to RSS">RSS</a> </li> <li class="sitemap-link" > <a href="http://www.ritsumei.ac.jp/~spkb/sitemap.xml" title="Sitemap for Google Webmastertools">sitemap.xml</a> </li> </ul> </div><!-- /.large-4.columns --> <div class="small-6 medium-3 large-3 columns"> <h5 class="shadow-black">Thanks</h5> <ul class="no-bullet shadow-black"> <li > <a href="http://www.ritsumei.ac.jp/~spkb" title=""></a> </li> <li class="network-entypo" > <a href="http://entypo.com/" target="_blank" title="Icons by Daniel Bruce">Icons by Daniel Bruce</a> </li> <li class="services-newsletter" > <a href="http://foundation.zurb.com/" target="_blank" title="Built on Foundation">Built on Foundation</a> </li> <li class="sitemap-link" > <a href="http://srobbin.com/jquery-plugins/backstretch/" target="_blank" title="Using Backstretch by Scott Robbin">Using Backstretch by Scott Robbin</a> </li> </ul> </div><!-- /.large-3.columns --> </div><!-- /.row --> </div><!-- /#footer --> <div id="subfooter"> <nav class="row"> <section id="subfooter-left" class="b30 small-12 medium-6 columns"> <ul class="inline-list"> <li>Created with &hearts; by <a style="display:inline;" href="http://phlow.de/">Phlow</a> with <a style="display:inline;" href="http://jekyllrb.com/" target="_blank">Jekyll</a> using <a style="display:inline;" href="http://phlow.github.io/feeling-responsive/">Feeling Responsive</a> </li> </ul> </section> <section id="subfooter-right" class="small-12 medium-6 columns social-icons"> <ul class="inline-list"> <li><a href="http://twitter.com/scokobro" target="_blank" class="icon-twitter" title="Why not?"></a></li> <li><a href="https://www.facebook.com/RitsIR" target="_blank" class="icon-facebook" title="Lass uns Freunde sein!"></a></li> <li><a href="http://github.com/scokobro" target="_blank" class="icon-github" title="Code and more..."></a></li> </ul> </section> </nav> </div><!-- /#subfooter --> </footer> <script src="http://www.ritsumei.ac.jp/~spkb/assets/js/javascript.min.js"></script> <script> (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){ (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m) })(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-60112281-1', 'auto'); ga('set', 'anonymizeIp', true); ga('send', 'pageview'); </script> </body> </html>
